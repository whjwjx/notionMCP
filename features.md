# fastNotion MCP 功能清单

本项目已实现的 Model Context Protocol (MCP) 接口支持以下全面的 Notion 操作，您可以直接通过 IDE 插件以自然语言形式调用。

---

## 1. 数据库管理与探索

### 获取数据库信息
- **功能描述**：获取数据库的完整元数据，包括标题、架构(Schema)和属性定义。
- **调用工具**：`get_database_info(database_id="...")`
- **预期结果**：返回数据库的 JSON 定义，包含所有字段类型及选项。

### 检索数据库属性
- **功能描述**：仅检索数据库的列信息（属性定义），用于快速了解可用字段。
- **调用工具**：`get_database_properties(database_id="...")`

### 架构更新与升级
- **功能描述**：修改数据库架构（添加/重命名/删除列）或一键升级为标准工作日志架构。
- **调用工具**：`update_database_properties` / `upgrade_database_schema`
- **特性**：支持一键添加“工作类型”和“状态”等预设字段。

---

## 2. 页面操作

### 智能页面创建
- **功能描述**：在指定数据库中创建新页面。
- **特性**：
    - **智能预测**：根据标题和正文内容自动推断并填充“工作类型”。
    - **自动记录**：自动填充北京时间的“记录时间”属性。
    - **正文写入**：支持在创建时直接写入页面正文（Children Blocks）。
- **指令示例**：“在 Notion 中创建记录，标题是‘优化用户登录页面’，状态设为‘已完成’，正文写上：优化了组件加载速度。”
- **调用工具**：`create_notion_page(title="...", properties={...}, content="...")`

### 页面更新与追加
- **功能描述**：修改现有页面的属性值或向页面末尾追加内容。
- **指令示例**：“更新页面 `2e1e...f346` 的状态为进行中，并追加一条说明：正在处理兼容性问题。”
- **调用工具**：`update_notion_page(page_id="...", properties={...})` / `append_page_content(page_id="...", content="...")`

### 获取页面详情
- **功能描述**：获取特定页面的所有属性值和元数据。
- **指令示例**：“帮我查一下这个页面的具体内容：`2e1e...f346`”
- **调用工具**：`get_page_info(page_id="...")`

---

## 3. 核心技术特性

### 智能属性适配 (Normalize)
- **拼音匹配**：支持通过属性名的拼音（如 `zhuang_tai`）操作对应字段。
- **自动包装**：开发者只需传入简单值（如字符串、列表），系统自动转换为 Notion 要求的复杂 JSON 结构。
- **类型支持**：覆盖 `select`, `multi_select`, `rich_text`, `date`, `status` 等常用类型。

### 稳健的 API 处理
- **多版本适配**：智能切换 Notion API 版本（2022-06-28 用于属性，2025-09-03 等最新版本用于创建）。
- **环境自适应**：自动定位 `.env` 路径，支持脱敏 ID 显示。
- **输入清洗**：自动处理 ID 中的特殊字符及格式问题。

---

## 4. 搜索与查询

### 条件查询
- **功能描述**：根据特定条件筛选数据库中的页面。
- **指令示例**：“在数据库中搜一下状态是‘已完成’的所有记录。”
- **调用工具**：`query_database(database_id="...", filter_params={...})`
- **预期结果**：返回匹配页面的完整列表及其属性摘要。
