# Notion MCP 功能清单

本项目已实现的 Model Context Protocol (MCP) 接口支持以下 Notion 操作，您可以直接通过 IDE 插件以自然语言形式调用。

---

## 1. 数据库管理与探索

### 获取数据库详情
- **功能描述**：获取数据库的元数据、结构、ID 以及数据源信息。
- **指令示例**：“帮我查一下这个 Notion 数据库的信息：`<您的数据库ID>`”
- **调用工具**：`get_database_info(database_id="...")`
- **预期结果**：返回数据库的 JSON 定义，包括标题（如“工作日志”）、创建时间及关联的数据源 ID。

### 动态属性识别
- **功能描述**：自动识别数据库中的 `title` 类型属性名称。
- **技术细节**：无需手动指定标题字段名，系统会自动识别并适配（如“日期”、“标题”或“Name”）。

---

## 2. 页面操作

### 智能页面创建
- **功能描述**：在指定数据库中创建新页面。
- **指令示例**：“在 Notion 数据库 `<您的数据库ID>` 中新建一个页面，标题叫 '今日代码提交'，内容填 '完成了 MCP 接口的封装'。”
- **调用工具**：`create_notion_page(database_id="...", title="...", content="...")`
- **预期结果**：在 Notion 中成功创建页面，并返回该页面的完整 URL。

### 页面属性更新
- **功能描述**：通过页面 ID 更新现有页面的富文本内容。
- **指令示例**：“把这个 Notion 页面 `<您的页面ID>` 的工作内容更新为 '测试更新功能成功'。”
- **调用工具**：`update_notion_page(page_id="...", content="...")`
- **预期结果**：目标页面的指定属性值被修改，并返回更新后的页面链接。

---

## 3. 搜索与查询

### 条件查询
- **功能描述**：在数据库内根据特定条件筛选页面。
- **指令示例**：“在数据库 `<您的数据库ID>` 中搜一下标题包含 '测试' 的页面。”
- **调用工具**：`query_database(database_id="...", filter_params={"property": "日期", "title": {"contains": "测试"}})`
- **预期结果**：返回一个列表，包含所有符合条件的页面 ID、标题、内容摘要及访问链接。

---

## 4. 技术特性与优化
- **API 版本切换**：智能适配 Notion API 2025-09-03 (创建) 与 2022-06-28 (查询)。
- **路径自适应**：通过绝对路径加载 `.env`，解决 MCP 跨目录运行时的配置丢失问题。
- **输入清洗**：自动剔除 ID 中的 `<>` 占位符及连字符，确保 URL 请求合法。
